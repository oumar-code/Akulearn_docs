%% Edge Hub - System Block Diagram (Mermaid)
flowchart LR
  SP[SOLAR PANEL\n(50W, ~18V Vmp)] --> MPPT[MPPT Charge Controller]
  MPPT --> BATT[LiFePO4 Battery Pack\n(12V nominal) \n+BMS]
  BATT --> DC_DC[DC-DC Converters \n(12V, 5V, 3.3V, 1.8V rails)]
  DC_DC --> CM[Compute Module\n(Jetson Orin Nano / CM4)]
  CM -->|MIPI CSI| CAM[Camera(s)]
  CM -->|SPI/I2C| SENSORS[Environmental Sensors\nTemp/Humidity/Vibration]
  CM -->|PCIe/USB| ACCEL[Optional NPU / Coral / Edge Accelerator]
  CM --> ETH[Ethernet (GbE) / PoE]
  CM --> RF[RF Subsystem]
  RF --> LoRa[LoRa (SX126x)\nExternal Antenna]
  RF --> WiFi[Wi-Fi 6 Module\nExternal Antenna]
  RF --> Cellular[Cellular Modem (eSIM)\nExternal Antenna]
  STORAGE[Storage (eMMC / NVMe)] --> CM
  ENC[Enclosure: IP65â€“IP67\nMounting: pole/wall] -. protects .-> CM
  ENC -. protects .-> BATT
  subgraph Local I/O
    USB[USB / Debug UART]
    JTAG[JTAG / Programming]
  end
  CM --> USB
  CM --> JTAG
